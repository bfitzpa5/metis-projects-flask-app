{% extends "base.html" %}

{% block blog_content %}
<p>
  For my third project at Metis, I built a pitch classification model.
  The data was sourced through scraping Kickstarter using Selenium (see post <a href="#">here</a> for more detail).
  The model turned pitches into a <em>Term-Frequency-Inverse-Document-Frequency</em> matrix per word as the dependent variables, with the pitch out (1 for successfully funded, 0 for failure to fund) as the independent.
  To create the bag-of-words model we'll use sklearn's TfidfVectorizer.
  First, importing and cleaning the data.
</p>
<pre class="language-python"><code>import os
import pandas as pd
import numpy as np
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.naive_bayes import GaussianNB
from sklearn.metrics import accuracy_score

"""
Data
"""
fname = os.path.join(
    'Data',
    'kickstarter_data.json'
)
df = pd.read_json(fname, 'records')

"""
Preprocesing
"""
pat = r'(?P<pledged>.+)\npledged of (?P<goal>.+) goal\n[,\d]+\nbackers?'
df[['pledged', 'goal']] = df.goal_and_pledged_backers.str.extract(pat)

df = df.assign(
    pledged_currency=lambda x: x.pledged.str.extract('([^\d]+)'),
    pledged_amount=lambda x: x.pledged.astype(str).map(lambda x: ''.join([i for i in x if i.isdigit()])).astype(int),
    goal_currency=lambda x: x.goal.str.extract('([^\d]+)'),
    goal_amount=lambda x: x.goal.astype(str).map(lambda x: ''.join([i for i in x if i.isdigit()])).astype(int),
)</code></pre>
<p>Now let's look at some Kickstarter pitches, aka stories</p>
<table class="table">
  <thead>
    <tr style="text-align: center;">
      <th>story</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Yes, it's Christmas in August! And you are among the first to hear about The Christmas Stairs, a brand new children’s book that will be released this fall!  \n The Author \n Patty Stoner, a mother of five grown children, lives with her husband Tim in Grand Rapids, Michigan, where she has directed the Discipleship program at The Potters House School for the past 20 years. Patty loves children of all ages, as well as writing and creating events for their enrichment. One of her weekly highlights has been reading aloud to the second and third graders. “I especially loved reading during the Christmas season, and it was during those years a deep desire began to grow within me to write a Christmas story of my own - The Christmas Stairs is the result!”\n The Making of The Christmas Stairs: \n "After years of reading and collecting Children’s books, the desire to write became irresistible.  I love richly textured books that with each reading something new is discovered. That was my aim for readers of The Christmas Stairs.  It was a delightful process to write the story as well as to create the characters and scenes for the illustrations.  \nWhen the writing was completed, the hunt was on as I began gathering materials to make props, and searched thrift stores for clothing that roughly fit the time period of my own childhood - the 1960’s.    \n Then, camera in hand, I recruited children and friends from the Potters House School to portray the scenes in Kate’s story."  \n\nThe Illustration Designer: \nPhotos finished, my nephew, Alex Stoner, with his superb skills as a graphic designer, worked meticulously to bring Kate and her world to life. \nAn example of one of the photos before... And after Alex's transformation\n The Illustration Designer:  \nAlex Stoner has worked in the area of Graphic Design for the past eleven years.  In addition to his love for design, Alex plays guitar and finds great enjoyment in baking and home improvement projects. Alex lives in Nashville, Tennessee with his wife Cathey, and their two young children.   \nThe Story:\nIt is December 1 and Kate, a young girl, is far from her family. She is deeply worried over her father who is at home seriously ill. Four weeks until Christmas seems like an eternity, but in the course of those 24 days of Advent she discovers that small acts of love have the power to bring joy to others and a hope she could never have imagined.\n Take a Peek Inside: \nAnd so begins a journey that Kate will never forget. What awaits her over the next few weeks will not only change her own life, but will touch countless others as she meets a mysterious little girl and, step by step, she bravely climbs… The Christmas Stairs.    \n What Other's are Saying: \n A Two-fold Purpose: \n“In the year 2000, my husband and I traveled to Mozambique, Africa where we met a little boy who, a year and a half later, would become our 5th child. That experience nearly 20 years ago resulted in many other trips to Africa and Central America and planted in us a desire to expand our ability to support organizations that are doing just what Kate does in The Christmas Stairs— caring for vulnerable children among us.”  \nThis book is a means of making that dream a reality as all net profits will go to ministries that impact children around the world, beginning with:\nFaith in Deeds: An organization committed to the support of abandoned and disenfranchised children in India by providing them with a family atmosphere in which they learn to follow the ways of Jesus. \nJubilee Centers International:  Located in one of the poorest areas of Honduras, Jubilee Centers offers Christian Education and holistic community development reaching hundreds of children and their families. \nThe Potters House: An urban school in Grand Rapids, Michigan that provides a Christ-centered education for children from all ethnic heritages and income levels.  \nWhy Kickstarter?\nWhat years of research uncovered was that self-publishing a high-quality, 48-page, hardcover, children’s book with slipcover, entails significant costs.  To this point The Christmas Stairs has been a completely self-paid endeavor. But we have reached the place where it’s time to print, and for that we need your partnership. With your support, we will be able to publish this delightful story. In return you and your family will receive a beautifully bound book for Christmas and know that your investment will help provide loving care and education for children world-wide.  \n                Thank you for supporting The Christmas Stairs! \nLook for The Christmas Stairs website coming soon: www.thechristmasstairs.com\n~ Special thanks to Stephen Panaggio of Voyage Pictures in Grand Rapids, Michigan for his expertise in creating the video included in this site.</td>
    </tr>
    <tr>
      <td>with the help of an amazingly Talented Lady @thingymabobsboutique \nmy Wendy Darling inspired Pin was bought to life.\nI have created a few pins previously but nothing quite this big.\n\nThe pin will meas approximately 3 inches and will have Glitter, sandblasted and Screen Printed elements to it.</td>
    </tr>
    <tr>
      <td>Hai!\nWelcome to my kickstarter, I’m Rosanna, and I’m a small girl with a vivid imagination hiding out in rainy England.  This all started with a  doodle in the back of a notebook, which when I shared with friends took a life of its own and requests started coming in. This went from stickers to now enamel pin requests, so here we are!\nWhy pledge rather than buy? I’ve always been fascinated with the idea of Kickstarter, and I have always loved this format which helps a small artist realise their awesome dreams.  When you support a Kickstarter, you're getting a great deal and helping a small scale maker get their creative life together.  Now, I’m the one asking for a little help funding my dreams… \n*.~ Follow @rosanna.louise on INSTAGRAM for updates~.*\nEach pin will be hard enamel, with a metal clutch and will be individually packaged and presented on an illustrated backing card.  I’ll be updating the campaign as we progress with any new designs.  You can also visit my instagram for behind the scenes and looks at my other items!  I’m a highly creative person, and you’ll find many different things on my page. I’m most active on instagram so follow me there for the most updates.\nI hope you will like these designs, and please share this campaign to anyone you think would be interested! I would love to get all these designs unlocked!\nThe designs\nMy initial goal is to unlock the charmander with marshmallow pin and the full set of stickers. If this project fully funded, every order will receive a pin of their choice from whichever designs are unlocked, plus the corresponding sticker. \nI also have a series of stretch goals I would like to unlock. These include  Bulbasaur, Squirtle, Eeveelutions ice cream, Wobbuffet, and Caterpie. If we can manage to get them all unlocked I will be including a surprise free gift for everyone! \nWhere do the funds collected for this Kickstarter go? \nYou might be wondering where all the money goes? The majority of the funds are for the pin production itself. Another chunk will be for shipping costs (which I do my best to keep low, so pins will not have tracking as this adds on to the cost, however I will give everyone the option to purchase it). The final chunk goes to Kickstarter itself. When you pledge, you are paying for just your selected pins and shipping! :)\nPlease remember, your pledges will not be charged until the campaign is over! Early pledges help out to unlock even more characters, so please don't hesitate if you are interested.\nWhen will the pins ship out? \nKickstarter takes 2 weeks after the campaign ends to send the funds, and as soon as it reaches my account that the pins will be ordered. If we manage to reach my initial target, the pins will be ordered earlier! Production can take around a month, and then they will be shipped to me. I will ship them out to everyone as soon as I have them in my hands and have confirmed the quality! :)\nThank you for checking out my Kickstarter, and please feel free to ask any questions! &lt;3</td>
    </tr>
  </tbody>
</table>

<p>
  Whoa! Those lengthy pitches make for a lot of NLP data to work with.
  Next we'll run our stories through a TfidfVectorizer and then send that to our model.
</p>

<pre class="language-py"><code>documents = df.story.values
vectorizer = TfidfVectorizer(stop_words="english")
doc_vectors = vectorizer.fit_transform(documents).toarray()
y_true = df.loc[:, 'success']

model = GaussianNB().fit(doc_vectors, y_true)

y_pred = model.predict(doc_vectors)
"Accuracy Score:{:-10.2%}".format(accuracy_score(y_true, y_pred))</code></pre>

<p>
  This returns an accuracy score of 99.46%.
  Now, we, the potential kickstarter investor, can know before a project starts whether it will be funded!
</p>
{% endblock %}
